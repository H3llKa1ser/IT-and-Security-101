# Web Security

This unit summarizes the Azure security baseline for App Service to assist you in creating new requirements specifications for Web workloads.

Please refer to Introduction to Microsoft Cybersecurity Reference Architecture and cloud security benchmark for more background on Microsoft Cloud Security Benchmark.

In the table below, we have included controls from the full baseline where:

1) Security controls were supported but not enabled by default

2) There was explicit guidance which contained action to be taken on the part of the customer

| **Area**                   | **Control**                                                    | **Feature**                                                        | **Guidance Summary**                                                                                                                                                                                                                                                                                          |
|----------------------------|----------------------------------------------------------------|---------------------------------------------------------------------|------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------|
| Network security           | NS-1: Establish network segmentation boundaries                | Virtual Network Integration                                         | Ensure a stable IP for outbound communications using Virtual Network integration to allow IP allowlisting.                                                                                                                                                                                                     |
|                            | NS-2: Secure cloud services with network controls              | Azure Private Link                                                  | Use private endpoints to allow clients in your private network to securely access Azure Web Apps.                                                                                                                                                                                                               |
|                            |                                                                | Disable Public Network Access                                       | Disable public access using IP ACL filtering, private endpoints, or by setting `publicNetworkAccess` to `Disabled`.                                                                                                                                                                                            |
|                            | NS-5: Deploy DDoS protection                                   |                                                                     | Enable DDoS Protection on the virtual network hosting your WAF. Use Azure DDoS Protection tiers (Network/IP Protection) for enhanced mitigation.                                                                                                                                                               |
|                            | NS-6: Deploy web application firewall                          |                                                                     | Avoid bypassing WAF by restricting access to only the WAF using Access Restrictions, Service Endpoints, and Private Endpoints.                                                                                                                                                                                  |
| Identity management        | IM-1: Use centralized identity and authentication system       | Microsoft Entra authentication Required for Data Plane Access      | Use established identity providers for user authentication and authorization in web apps.                                                                                                                                                                                                                       |
|                            |                                                                | Local Authentication Methods for Data Plane Access                 | Restrict use of local auth methods and prefer Microsoft Entra ID for data plane access.                                                                                                                                                                                                                         |
|                            | IM-3: Manage application identities securely and automatically  | Managed Identities                                                  | Use managed identities to access Azure resources instead of service principals, avoiding hard-coded credentials.                                                                                                                                                                                                |
|                            | IM-7: Restrict resource access based on conditions              | Conditional Access for Data Plane                                   | Define and enforce Microsoft Entra Conditional Access policies for resource access.                                                                                                                                                                                                                             |
|                            | IM-8: Restrict the exposure of credentials and secrets          | Service Credential and Secrets Integration with Azure Key Vault     | Store secrets in Azure Key Vault. Use managed identity to securely access them instead of embedding in code.                                                                                                                                                                                                   |
| Privileged access          | PA-8: Determine access process for cloud provider support       | Customer Lockbox                                                    | Use Customer Lockbox to control and approve Microsoft support access to your data.                                                                                                                                                                                                                              |
| Data protection            | DP-3: Encrypt sensitive data in transit                         | Data in Transit Encryption                                          | Enforce TLS v1.2+ for data in transit and redirect all HTTP traffic to HTTPS.                                                                                                                                                                                                                                   |
|                            | DP-5: Use customer-managed key option in data at rest encryption when required | Data at Rest Encryption Using CMK                  | Use customer-managed keys where regulatory or organizational policies require full control over encryption keys.                                                                                                                                                                                                |
|                            | DP-6: Use a secure key management process                       | Key Management in Azure Key Vault                                   | Manage key lifecycle securely in Azure Key Vault including rotation and revocation.                                                                                                                                                                                                                              |
|                            | DP-7: Use a secure certificate management process               | Certificate Management in Azure Key Vault                           | Store certificates in Azure Key Vault for centralized management and reference them in App Service.                                                                                                                                                                                                             |
| Asset management           | AM-2: Use only approved services                                |                                                                     |                                                                                                                                                                                                                                                                                                                  |
|                            | AM-4: Limit access to asset management                         |                                                                     | Isolate sensitive systems using separate App Service Plans, Environments, subscriptions, or management groups.                                                                                                                                                                                                  |
| Logging and threat detection | LT-1: Enable threat detection capabilities                   | Microsoft Defender for App Service                                  | Use Microsoft Defender to detect attacks on your App Service workloads.                                                                                                                                                                                                                                         |
|                            | LT-4: Enable logging for security investigation                 | Azure Resource Logs                                                 | Enable resource logs on your App Service for visibility and investigation.                                                                                                                                                                                                                                       |
| Posture and vulnerability management | PV-2: Audit and enforce secure configurations        |                                                                     | Turn off remote debugging in production workloads to reduce attack surface.                                                                                                                                                                                                                                      |
|                            | PV-7: Conduct regular red team operations                      |                                                                     | Perform regular penetration testing on web apps per Microsoft’s testing guidelines.                                                                                                                                                                                                                              |
| Backup and recovery        | BR-1: Ensure regular automated backups                          | Azure Backup                                                        | For stateful apps, enable Backup and Restore on App Service. For stateless design, simplify recovery strategies.                                                                                                                                                                                                |
| DevOps security            | DS-6: Enforce security of workload throughout DevOps lifecycle  |                                                                     | Deploy to App Service from trusted, secured DevOps pipelines only. Avoid deploying unverified or unmanaged code.                                                                                                                                                                                                |
